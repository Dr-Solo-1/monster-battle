<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Ù…Ù…Ø§Ù„Ùƒ Ø§Ù„Ø¸Ù„Ø§Ù„</title>
  <style>
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: linear-gradient(135deg, #0a1525, #1a2a40);
      color: #e0f7fa;
      text-align: center;
      padding: 10px;
      margin: 0;
      font-size: 18px;
      line-height: 1.6;
    }
    .container {
      max-width: 100%;
      margin: 0 auto;
      background: rgba(13, 27, 45, 0.92);
      padding: 18px;
      border-radius: 20px;
      border: 2px solid #2a6b8a;
      box-shadow: 0 0 25px rgba(0, 0, 0, 0.6);
    }
    h1 {
      color: #ffd700;
      text-shadow: 0 0 12px rgba(255, 215, 0, 0.6);
      font-size: 30px;
      margin: 12px 0;
      letter-spacing: 1px;
    }
    .subtitle {
      color: #a8e6cf;
      font-style: italic;
      margin-bottom: 20px;
      font-size: 18px;
    }
    button {
      background: linear-gradient(to bottom, #2a7d45, #1e5d32);
      color: white;
      border: none;
      padding: 15px 22px;
      margin: 8px 6px;
      border-radius: 14px;
      cursor: pointer;
      font-size: 19px;
      font-family: 'Segoe UI', sans-serif;
      width: 92%;
      max-width: 320px;
      transition: all 0.25s ease;
      box-shadow: 0 4px 8px rgba(0,0,0,0.3);
    }
    button:hover {
      transform: translateY(-3px);
      box-shadow: 0 6px 12px rgba(0,0,0,0.4);
      background: linear-gradient(to bottom, #3cb371, #2a7d45);
    }
    .combat-btns {
      display: flex;
      justify-content: center;
      gap: 12px;
      flex-wrap: wrap;
      margin: 15px 0;
    }
    .combat-btns button {
      width: 46%;
      max-width: 150px;
      padding: 14px;
      font-size: 18px;
    }
    .stats {
      background: rgba(10, 30, 50, 0.85);
      padding: 18px;
      margin: 18px 0;
      border-radius: 16px;
      font-size: 20px;
      line-height: 1.9;
      border: 1px solid #2a6b8a;
    }
    .log {
      background: rgba(5, 18, 30, 0.88);
      height: 280px;
      overflow-y: auto;
      padding: 18px;
      border-radius: 16px;
      margin: 18px 0;
      text-align: right;
      border: 2px solid #2a6b8a;
      font-size: 20px;
      direction: rtl;
      scrollbar-width: thin;
      scrollbar-color: #2a7d45 #0a1a2a;
    }
    .log::-webkit-scrollbar {
      width: 8px;
    }
    .log::-webkit-scrollbar-track {
      background: #0a1a2a;
    }
    .log::-webkit-scrollbar-thumb {
      background: #2a7d45;
      border-radius: 4px;
    }
    .story {
      background: rgba(20, 45, 65, 0.6);
      padding: 18px;
      border-radius: 16px;
      margin: 18px 0;
      font-size: 21px;
      font-style: italic;
      color: #c1f0c1;
      min-height: 50px;
    }
    .zone-title {
      background: rgba(30, 70, 90, 0.5);
      padding: 14px;
      border-radius: 14px;
      margin: 16px 0;
      font-size: 24px;
      font-weight: bold;
      color: #88e688;
      text-shadow: 0 0 8px rgba(136, 230, 136, 0.4);
    }
    .choices {
      margin: 20px 0;
      padding: 18px;
      background: rgba(40, 50, 80, 0.5);
      border-radius: 16px;
      border: 1px solid #5d4a7a;
    }
    .adventure-log {
      margin-top: 20px;
      padding: 14px;
      background: rgba(25, 40, 60, 0.5);
      border-radius: 14px;
      font-size: 17px;
      color: #ffd700;
    }
    .adventure-log h3 {
      margin-top: 0;
      color: #ffd700;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>ğŸ° Ù…Ù…Ø§Ù„Ùƒ Ø§Ù„Ø¸Ù„Ø§Ù„</h1>
    <div class="subtitle">Ù…ØºØ§Ù…Ø±Ø© Ø¹Ø±Ø¨ÙŠØ© Ø®ÙŠØ§Ù„ÙŠØ© ÙÙŠ Ù‚Ù„Ø¨ Ø§Ù„Ø£Ø³Ø§Ø·ÙŠØ±...</div>

    <div id="startScreen">
      <p>Ø§Ø®ØªØ± Ø¨Ø·Ù„ÙÙƒ Ù…Ù† Ø£Ø¨Ø·Ø§Ù„ Ø§Ù„Ù‚Ø¨ÙŠÙ„Ø©:</p>
      <button onclick="startGame('Ø§Ù„ÙØ§Ø±Ø³')">Ø§Ù„ÙØ§Ø±Ø³ âš”ï¸ (Ù‡Ø¬ÙˆÙ… Ø¹Ø§Ù„ÙŠ)</button>
      <button onclick="startGame('Ø§Ù„Ø­ÙƒÙŠÙ…')">Ø§Ù„Ø­ÙƒÙŠÙ… ğŸ“œ (ØµØ­Ø© Ø£Ø¹Ù„Ù‰)</button>
      <button onclick="startGame('Ø§Ù„ØµÙŠØ§Ø¯')">Ø§Ù„ØµÙŠØ§Ø¯ ğŸ¹ (ØªÙˆØ§Ø²Ù†)</button>
    </div>

    <div id="gameScreen" style="display:none;">
      <div class="stats" id="statsBox">
        Ø§Ù„Ø¨Ø·Ù„: <span id="heroName">â€”</span><br>
        Ø§Ù„Ù…Ø³ØªÙˆÙ‰: <span id="level">1</span><br>
        Ø§Ù„ØµØ­Ø©: <span id="heroHP">100</span> / <span id="maxHP">100</span> â¤ï¸<br>
        Ø§Ù„Ù‡Ø¬ÙˆÙ…: <span id="heroAtk">15</span> ğŸ’¥<br>
        Ø§Ù„Ø°Ù‡Ø¨: <span id="gold">0</span> ğŸ’°<br>
        Ø§Ù„Ø³Ù…Ø¹Ø©: <span id="reputation">Ù…Ø­Ø§ÙŠØ¯</span> ğŸŒŸ
      </div>

      <div class="zone-title" id="zoneTitle">Ø§Ù„ØºØ§Ø¨Ø© Ø§Ù„Ù…Ù„Ø¹ÙˆÙ†Ø©</div>

      <div class="story" id="storyText">Ø§Ù„ØºØ§Ø¨Ø© Ù‡Ø§Ø¯Ø¦Ø©... Ù„ÙƒÙ†Ùƒ ØªØ´Ø¹Ø± Ø£Ù† Ø´ÙŠØ¦Ù‹Ø§ ÙŠØ±Ø§Ù‚Ø¨Ùƒ Ù…Ù† Ø¨ÙŠÙ† Ø§Ù„Ø£Ø´Ø¬Ø§Ø±.</div>

      <div class="log" id="battleLog">Ù…Ø±Ø­Ø¨Ù‹Ø§ Ø¨Ùƒ ÙÙŠ Ù…Ù…Ø§Ù„Ùƒ Ø§Ù„Ø¸Ù„Ø§Ù„!</div>

      <!-- Ø£Ø²Ø±Ø§Ø± Ø§Ù„ØªÙ†Ù‚Ù„ Ø¨ÙŠÙ† Ø§Ù„Ù…Ù†Ø§Ø·Ù‚ -->
      <div style="margin: 20px 0;">
        <button onclick="changeZone('Ø§Ù„ØºØ§Ø¨Ø©')">ğŸŒ² Ø§Ù„ØºØ§Ø¨Ø© Ø§Ù„Ù…Ù„Ø¹ÙˆÙ†Ø©</button>
        <button onclick="changeZone('Ø§Ù„ÙˆØ§Ø­Ø©')">ğŸŒ´ Ø§Ù„ÙˆØ§Ø­Ø© Ø§Ù„Ù…Ø­Ø±Ù‘Ù…Ø©</button>
        <button onclick="changeZone('Ø§Ù„Ø¬Ø¨Ø§Ù„')">â›°ï¸ Ø¬Ø¨Ø§Ù„ Ø§Ù„Ø¬Ù†</button>
        <button id="castleBtn" onclick="unlockCastle()" style="display:none;">ğŸ° Ù‚Ù„Ø¹Ø© Ø§Ù„Ø¸Ù„Ø§Ù„</button>
      </div>

      <button onclick="explore()">âš”ï¸ Ø§Ø³ØªÙƒØ´Ù Ø§Ù„Ù…Ù†Ø·Ù‚Ø©</button>
      <button onclick="upgrade('hp')">â¤ï¸ +20 ØµØ­Ø© (20 Ø°Ù‡Ø¨)</button>
      <button onclick="upgrade('atk')">ğŸ’¥ +5 Ù‡Ø¬ÙˆÙ… (25 Ø°Ù‡Ø¨)</button>
      <button onclick="showAdventureLog()">ğŸ“œ Ø³Ø¬Ù„ Ø§Ù„Ù…ØºØ§Ù…Ø±Ø§Øª</button>
      <button onclick="resetGame()">ğŸ”„ Ø§Ø¨Ø¯Ø£ Ù…Ù† Ø¬Ø¯ÙŠØ¯</button>

      <div id="choicesSection" class="choices" style="display:none;"></div>

      <div id="adventureLogSection" class="adventure-log" style="display:none;">
        <h3>Ø³Ø¬Ù„ Ù…ØºØ§Ù…Ø±Ø§ØªÙƒ:</h3>
        <div id="adventureLogContent">Ù„Ø§ ØªÙˆØ¬Ø¯ Ø£Ø­Ø¯Ø§Ø« Ø¨Ø¹Ø¯.</div>
      </div>
    </div>
  </div>

  <script>
    // =============== Ø§Ù„Ø­Ø§Ù„Ø© Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ© Ù„Ù„Ø¹Ø¨Ø© ===============
    let game = JSON.parse(localStorage.getItem('shadowKingdomsEpic')) || {
      hero: null,
      gold: 0,
      wins: 0,
      currentZone: "Ø§Ù„ØºØ§Ø¨Ø©",
      reputation: 0,
      adventureLog: [],
      unlockedCastle: false
    };

    // =============== Ø¯ÙˆØ§Ù„ Ù…Ø³Ø§Ø¹Ø¯Ø© ===============
    function log(msg) {
      const logBox = document.getElementById('battleLog');
      logBox.innerHTML += msg + '<br>';
      logBox.scrollTop = logBox.scrollHeight;
      addToAdventureLog(msg);
      saveGame();
    }

    function addToAdventureLog(msg) {
      // Ù„Ø§ Ù†Ø¶ÙŠÙ Ø±Ø³Ø§Ø¦Ù„ Ø§Ù„ØªØ­Ø¯ÙŠØ« Ø£Ùˆ Ø§Ù„ÙØ±Ø§Øº
      if (msg.includes("Ø§Ù„ØµØ­Ø©:") || msg.includes("Ø§Ù„Ø°Ù‡Ø¨:") || msg === "") return;
      game.adventureLog.push(`â€¢ ${msg}`);
      // Ù†Ø­Ø§ÙØ¸ Ø¹Ù„Ù‰ Ø¢Ø®Ø± 15 Ø­Ø¯Ø«
      if (game.adventureLog.length > 15) {
        game.adventureLog.shift();
      }
    }

    function showAdventureLog() {
      const section = document.getElementById('adventureLogSection');
      const content = document.getElementById('adventureLogContent');
      if (game.adventureLog.length === 0) {
        content.innerHTML = "Ù„Ø§ ØªÙˆØ¬Ø¯ Ø£Ø­Ø¯Ø§Ø« Ø¨Ø¹Ø¯.";
      } else {
        content.innerHTML = game.adventureLog.join('<br>');
      }
      section.style.display = section.style.display === 'none' ? 'block' : 'none';
    }

    function saveGame() {
      localStorage.setItem('shadowKingdomsEpic', JSON.stringify(game));
    }

    function getReputationText() {
      if (game.reputation >= 8) return "Ø£Ø³Ø·ÙˆØ±ÙŠ";
      if (game.reputation >= 5) return "Ø´Ø¬Ø§Ø¹";
      if (game.reputation >= 2) return "ÙƒØ±ÙŠÙ…";
      if (game.reputation <= -8) return " traitor";
      if (game.reputation <= -5) return "Ø¬Ø¨Ø§Ù†";
      if (game.reputation <= -2) return "Ø¬Ø´Ø¹";
      return "Ù…Ø­Ø§ÙŠØ¯";
    }

    function updateUI() {
      if (!game.hero) return;
      document.getElementById('heroName').textContent = game.hero.name;
      document.getElementById('heroHP').textContent = game.hero.hp;
      document.getElementById('maxHP').textContent = game.hero.maxHp;
      document.getElementById('heroAtk').textContent = game.hero.atk;
      document.getElementById('gold').textContent = game.gold;
      document.getElementById('level').textContent = Math.floor(game.wins / 3) + 1;
      document.getElementById('reputation').textContent = getReputationText();
      
      const zoneData = zones[game.currentZone];
      document.getElementById('zoneTitle').textContent = zoneData.name;
      document.getElementById('storyText').textContent = 
        zoneData.story[Math.floor(Math.random() * zoneData.story.length)];
      
      // Ø¥Ø¸Ù‡Ø§Ø± Ù‚Ù„Ø¹Ø© Ø§Ù„Ø¸Ù„Ø§Ù„ Ù„Ùˆ ÙÙØªØ­Øª
      if (game.unlockedCastle) {
        document.getElementById('castleBtn').style.display = 'block';
      }
    }

    function showChoices(choices, text) {
      let html = `<p style="font-size:20px;">${text}</p>`;
      choices.forEach((c, i) => {
        html += `<button onclick="handleChoice(${i})">${c.text}</button>`;
      });
      document.getElementById('choicesSection').innerHTML = html;
      document.getElementById('choicesSection').style.display = 'block';
      window.currentChoices = choices;
    }

    function handleChoice(index) {
      window.currentChoices[index].effect();
      document.getElementById('choicesSection').style.display = 'none';
      updateUI();
    }

    // =============== Ø§Ù„Ø´Ø®ØµÙŠØ§Øª Ø§Ù„Ø¬Ø§Ù†Ø¨ÙŠØ© ===============
    const npcs = {
      "Ø§Ù„ØºØ§Ø¨Ø©": [
        {
          name: "Ø§Ù„Ø¹Ø¬ÙˆØ² Ø§Ù„Ø­ÙƒÙŠÙ…",
          dialogue: "Ø§Ù„Ø³Ù„Ø§Ù… Ø¹Ù„ÙŠÙƒØŒ ÙŠØ§ Ø¨Ø·Ù„... Ù‡Ù„ ØªØ¨Ø­Ø« Ø¹Ù† Ø§Ù„Ø­Ù‚ÙŠÙ‚Ø© Ø§Ù„ØªÙŠ ØªØ­Ø±Ù‚ØŒ Ø£Ù… Ø§Ù„Ù‚ÙˆØ© Ø§Ù„ØªÙŠ ØªÙ‡Ø¯Ù…ØŸ",
          choices: [
            { 
              text: "Ø£Ø¨Ø­Ø« Ø¹Ù† Ø§Ù„Ø­Ù‚ÙŠÙ‚Ø©", 
              effect: () => { 
                game.reputation += 3; 
                log("Ø§Ù„Ø¹Ø¬ÙˆØ²: 'Ø§Ù„Ø­Ù‚ÙŠÙ‚Ø© Ø³ØªØ­Ø±Ø±Ùƒ... Ø­ØªÙ‰ Ù„Ùˆ Ø£ÙˆØ¬Ø¹ØªÙƒ.'"); 
              } 
            },
            { 
              text: "Ø£Ø¨Ø­Ø« Ø¹Ù† Ø§Ù„Ù‚ÙˆØ©", 
              effect: () => { 
                game.hero.atk += 4; 
                log("Ø§Ù„Ø¹Ø¬ÙˆØ²: 'Ø§Ù„Ù‚ÙˆØ© ØªÙØºØ±ÙŠ... Ù„ÙƒÙ†Ù‡Ø§ Ù„Ø§ ØªÙØ±Ø¶ÙŠ.'"); 
              } 
            }
          ]
        },
        {
          name: "Ø§Ù„Ù„Øµ Ø§Ù„Ø¬Ø±ÙŠØ­",
          dialogue: "Ø³Ø§Ø¹Ø¯Ù†ÙŠ... ÙˆØ³Ø£Ø®Ø¨Ø±Ùƒ Ø¨Ø³Ø±ÙÙ‘ Ø¹Ù† ÙƒÙ†Ø²Ù Ù…Ø¯ÙÙˆÙ† ØªØ­Øª Ø¬Ø°ÙˆØ± Ø§Ù„Ø´Ø¬Ø±Ø© Ø§Ù„Ø¹Ø¸ÙŠÙ…Ø©!",
          choices: [
            { 
              text: "Ø£Ø³Ø§Ø¹Ø¯Ù‡", 
              effect: () => { 
                game.gold += 40; 
                game.reputation += 2;
                log("Ø§Ù„Ù„Øµ: 'Ø§Ù„ÙƒÙ†Ø² ÙÙŠ Ù‚Ù„Ø¨ Ø§Ù„ØºØ§Ø¨Ø©... Ø§Ø­ØªØ±Ø³ Ù…Ù† Ø§Ù„Ø¹ÙŠÙˆÙ† Ø§Ù„Ø®ÙÙŠØ©!'"); 
              } 
            },
            { 
              text: "Ø£ØªØ±ÙƒÙ‡ ÙŠÙ…ÙˆØª", 
              effect: () => { 
                game.reputation -= 3; 
                log("Ø§Ù„Ù„Øµ: 'Ø³ØªÙ†Ø¯Ù…... Ø§Ù„Ø¸Ù„Ø§Ù… ÙŠØ¹Ø±Ù Ø·Ø±ÙŠÙ‚Ùƒ Ø§Ù„Ø¢Ù†.'"); 
              } 
            }
          ]
        }
      ],
      "Ø§Ù„ÙˆØ§Ø­Ø©": [
        {
          name: "Ø§Ù„ØªØ§Ø¬Ø± Ø§Ù„ØºØ§Ù…Ø¶",
          dialogue: "Ù„Ø¯ÙŠÙ‘ Ø³Ø­Ø±ÙŒ Ù…Ù† Ø²Ù…Ù† Ø§Ù„ÙØ±Ø§Ø¹Ù†Ø©... Ù„ÙƒÙ†Ù‡ Ù„Ø§ ÙŠÙØ´ØªØ±Ù‰ Ø¨Ø§Ù„Ø°Ù‡Ø¨ ÙˆØ­Ø¯Ù‡.",
          choices: [
            { 
              text: "Ø£Ø¯ÙØ¹ 35 Ø°Ù‡Ø¨Ù‹Ø§", 
              effect: () => { 
                if (game.gold >= 35) {
                  game.gold -= 35;
                  game.hero.maxHp += 30;
                  game.hero.hp += 30;
                  log("Ø­ØµÙ„Øª Ø¹Ù„Ù‰ Ø³Ø­Ø± Ø§Ù„Ø­ÙŠØ§Ø© Ø§Ù„Ø£Ø²Ù„ÙŠ! (+30 ØµØ­Ø© Ø¯Ø§Ø¦Ù…Ø©)");
                } else {
                  log("Ù„ÙŠØ³ Ù„Ø¯ÙŠÙƒ Ø°Ù‡Ø¨ ÙƒØ§ÙÙ!");
                }
              } 
            },
            { 
              text: "Ù…Ø§Ø°Ø§ ØªØ±ÙŠØ¯ Ø¨Ø¯Ù„ Ø§Ù„Ø°Ù‡Ø¨ØŸ", 
              effect: () => { 
                if (game.reputation >= 3) {
                  game.hero.maxHp += 20;
                  game.hero.hp += 20;
                  log("Ø§Ù„ØªØ§Ø¬Ø±: 'Ø³Ù…Ø¹ØªÙ Ø¹Ù† Ø´Ø¬Ø§Ø¹ØªÙƒ... Ø®Ø° Ù‡Ø°Ø§ Ù‡Ø¯ÙŠØ©.'");
                } else {
                  log("Ø§Ù„ØªØ§Ø¬Ø±: 'Ø¹ÙØ¯Ù’ Ø­ÙŠÙ† ØªØµØ¨Ø­ Ø¬Ø¯ÙŠØ±Ù‹Ø§.'");
                }
              } 
            }
          ]
        },
        {
          name: "Ø§Ù„Ø±Ø§Ù‚ØµØ© Ø§Ù„ØºØ§Ù…Ø¶Ø©",
          dialogue: "Ø£Ø±Ù‰ Ù…Ø³ØªÙ‚Ø¨Ù„Ùƒ ÙÙŠ Ø±Ù…Ø§Ù„ Ø§Ù„ÙˆØ§Ø­Ø©... Ù‡Ù„ ØªØ±ÙŠØ¯ Ø£Ù† ØªØ¹Ø±ÙØŸ",
          choices: [
            { 
              text: "Ø£Ø®Ø¨Ø±ÙŠÙ†ÙŠ", 
              effect: () => { 
                log("Ø§Ù„Ø±Ø§Ù‚ØµØ©: 'Ø³ØªÙˆØ§Ø¬Ù‡ Ù…Ù„Ùƒ Ø§Ù„Ø¸Ù„Ø§Ù„... ÙˆØ³ØªØ®ØªØ§Ø± Ø¨ÙŠÙ† Ø§Ù„Ø¹Ø±Ø´ ÙˆØ§Ù„Ø¶Ù…ÙŠØ±.'");
                game.reputation += 1;
              } 
            },
            { 
              text: "Ø§Ù„Ù…Ø³ØªÙ‚Ø¨Ù„ ÙŠÙØµÙ†Ø¹ØŒ Ù„Ø§ ÙŠÙÙ‚Ø±Ø£", 
              effect: () => { 
                game.hero.atk += 3;
                log("Ø§Ù„Ø±Ø§Ù‚ØµØ©: 'Ø¥Ø±Ø§Ø¯Ø© Ù‚ÙˆÙŠØ©... Ø³ØªÙ†Ø¬Ùˆ.'");
              } 
            }
          ]
        }
      ],
      "Ø§Ù„Ø¬Ø¨Ø§Ù„": [
        {
          name: "Ø§Ù„ÙØ§Ø±Ø³Ø© Ø§Ù„Ù…Ø¬Ù‡ÙˆÙ„Ø©",
          dialogue: "Ø£Ø¨Ø­Ø« Ø¹Ù† Ù…Ù† ÙŠÙ‚Ù Ù…Ø¹ÙŠ Ø¶Ø¯ Ù…Ù„Ùƒ Ø§Ù„Ø¸Ù„Ø§Ù„. Ù‡Ù„ Ø£Ù†Øª Ø¬Ø§Ù‡Ø² Ù„Ù‚Ø³Ù… Ø§Ù„Ø¯Ù…ØŸ",
          choices: [
            { 
              text: "Ù†Ø¹Ù…ØŒ Ø£Ù‚Ø³Ù…", 
              effect: () => { 
                game.reputation += 4;
                game.unlockedCastle = true;
                log("Ø§Ù„ÙØ§Ø±Ø³Ø©: 'Ø§Ù„Ù‚Ù„Ø¹Ø© Ù…ÙØªÙˆØ­Ø© Ù„Ùƒ Ø§Ù„Ø¢Ù†. Ø³Ø£Ù†ØªØ¸Ø±Ùƒ Ù‡Ù†Ø§Ùƒ.'");
                document.getElementById('castleBtn').style.display = 'block';
              } 
            },
            { 
              text: "Ù„ÙŠØ³ Ø¨Ø¹Ø¯", 
              effect: () => { 
                log("Ø§Ù„ÙØ§Ø±Ø³Ø©: 'Ø§Ù„Ø®ÙˆÙ Ù„Ø§ ÙŠØ¨Ù†ÙŠ Ø§Ù„Ù…Ù…Ø§Ù„Ùƒ... Ù„ÙƒÙ†Ù‡ ÙŠØ­Ù…ÙŠ Ø§Ù„Ø£Ø±ÙˆØ§Ø­ Ø£Ø­ÙŠØ§Ù†Ù‹Ø§.'");
              } 
            }
          ]
        },
        {
          name: "Ø§Ù„Ø³Ø§Ø­Ø± Ø§Ù„Ø¹Ø¬ÙˆØ²",
          dialogue: "Ø§Ù„Ø¬Ø¨Ø§Ù„ ØªÙ‡Ù…Ø³ Ø¨Ø£Ø³Ù…Ø§Ø¡ Ø§Ù„Ø£Ù…ÙˆØ§Øª... Ù‡Ù„ ØªØ±ÙŠØ¯ Ø£Ù† ØªØ³ØªØ¯Ø¹ÙŠ Ø±ÙˆØ­Ù‹Ø§ØŸ",
          choices: [
            { 
              text: "Ø§Ø³ØªØ¯Ø¹Ù Ø±ÙˆØ­ Ø­Ù„ÙŠÙ", 
              effect: () => { 
                if (game.gold >= 50) {
                  game.gold -= 50;
                  log("Ø±ÙˆØ­ Ù…Ø­Ø§Ø±Ø¨ Ù‚Ø¯ÙŠÙ… ÙŠØ­Ø§Ø±Ø¨ Ù…Ø¹Ùƒ ÙÙŠ Ø§Ù„Ù…Ø¹Ø±ÙƒØ© Ø§Ù„Ù‚Ø§Ø¯Ù…Ø©! (+15 Ù‡Ø¬ÙˆÙ… Ù…Ø¤Ù‚Øª)");
                  game.tempAtkBoost = 15;
                } else {
                  log("Ø§Ù„Ø³Ø§Ø­Ø±: 'Ø§Ù„Ø£Ø³Ø¹Ø§Ø± Ù…Ø±ØªÙØ¹Ø© ÙÙŠ Ø§Ù„Ø¬Ø¨Ø§Ù„.'");
                }
              } 
            },
            { 
              text: "Ù„Ø§ØŒ Ù‡Ø°Ø§ Ø³Ø­Ø± Ù…Ø­Ø±Ù…", 
              effect: () => { 
                game.reputation += 2;
                log("Ø§Ù„Ø³Ø§Ø­Ø±: 'Ø§Ù„Ø­ÙƒÙ…Ø© Ø£Ù‚ÙˆÙ‰ Ù…Ù† Ø§Ù„Ø³Ø­Ø±.'");
              } 
            }
          ]
        }
      ],
      "Ø§Ù„Ù‚Ù„Ø¹Ø©": [
        {
          name: "Ù…Ù„Ùƒ Ø§Ù„Ø¸Ù„Ø§Ù„",
          dialogue: "Ù‡Ø§ Ù‚Ø¯ ÙˆØµÙ„Øª... Ù‡Ù„ Ø¬Ø¦Øª Ù„ØªÙ‚ØªÙ„Ù†ÙŠØŒ Ø£Ù… Ù„ØªÙ†Ø¶Ù… Ø¥Ù„ÙŠÙ‘ØŸ",
          choices: [
            { 
              text: "Ø³Ø£Ø¬Ù‡Ø²Ùƒ!", 
              effect: () => { 
                log("Ø§Ù„Ù…Ù„Ùƒ: 'Ø¥Ø°Ù†... Ù„ØªÙƒÙ† Ø§Ù„Ù…Ø¹Ø±ÙƒØ© Ø§Ù„Ø£Ø®ÙŠØ±Ø©!'");
                startBattle(bossMonster);
              } 
            },
            { 
              text: "Ù…Ø§ Ø§Ù„Ù‚ÙˆØ© Ø§Ù„ØªÙŠ ØªÙ…Ù„ÙƒÙ‡Ø§ØŸ", 
              effect: () => { 
                if (game.reputation <= -5) {
                  log("Ø§Ù„Ù…Ù„Ùƒ: 'Ø£Ø±Ù‰ Ø£Ù†Ùƒ ÙÙ‡Ù…Øª Ø§Ù„Ø­Ù‚ÙŠÙ‚Ø©... ØªØ¹Ø§Ù„ØŒ Ø®Ø° Ù…ÙƒØ§Ù†Ùƒ Ø¨Ø¬Ø§Ù†Ø¨ÙŠ.'");
                  endGame("dark");
                } else {
                  log("Ø§Ù„Ù…Ù„Ùƒ: 'Ø§Ù„ÙØ¶ÙˆÙ„ ÙŠÙ‚ØªÙ„Ùƒ!' â€” ÙŠÙ‡Ø§Ø¬Ù…Ùƒ ÙØ¬Ø£Ø©!");
                  startBattle(bossMonster);
                }
              } 
            }
          ]
        }
      ]
    };

    // =============== Ø£Ù†ÙˆØ§Ø¹ Ø§Ù„ÙˆØ­ÙˆØ´ ===============
    const monsterTypes = {
      common: { fleeChance: 0.4, fearThreshold: 0.3, name: "Ø¹Ø§Ø¯ÙŠ" },
      rare: { fleeChance: 0.1, fearThreshold: 0.15, name: "Ù†Ø§Ø¯Ø±" },
      elite: { fleeChance: 0, fearThreshold: 0, name: "Ù†Ø®Ø¨Ø©" },
      boss: { fleeChance: 0, fearThreshold: 0, name: "Ø±Ø¦ÙŠØ³" }
    };

    // =============== Ø¹Ø§Ù„Ù… Ø§Ù„Ù„Ø¹Ø¨Ø© (Ø§Ù„Ù…Ù†Ø§Ø·Ù‚) ===============
    const zones = {
      "Ø§Ù„ØºØ§Ø¨Ø©": {
        name: "Ø§Ù„ØºØ§Ø¨Ø© Ø§Ù„Ù…Ù„Ø¹ÙˆÙ†Ø©",
        story: [
          "ØªØ³Ù…Ø¹ ØµØ±ÙŠØ±Ù‹Ø§ Ø¨ÙŠÙ† Ø§Ù„Ø£ØºØµØ§Ù†... Ø´ÙŠØ¡ ÙŠÙ‚ØªØ±Ø¨!",
          "ÙˆØ¬Ø¯Øª Ø£Ø«Ø± Ø£Ù‚Ø¯Ø§Ù… ØºØ±ÙŠØ¨Ø© Ø¹Ù„Ù‰ Ø§Ù„ØªØ±Ø§Ø¨.",
          "Ø¶Ø¨Ø§Ø¨ ÙƒØ«ÙŠÙ ÙŠÙ„Ù Ø§Ù„Ù…ÙƒØ§Ù†. Ø§Ù„Ø±Ø¤ÙŠØ© Ø´Ø¨Ù‡ Ù…Ø¹Ø¯ÙˆÙ…Ø©...",
          "Ø£Ø´Ø¬Ø§Ø± Ø§Ù„ØºØ§Ø¨Ø© ØªØªØ­Ø±Ùƒ Ø¨Ø¨Ø·Ø¡... Ù‡Ù„ Ù‡ÙŠ Ø­ÙŠØ©ØŸ",
          "Ø³Ù…Ø¹Øª Ù‡Ù…Ø³Ù‹Ø§ Ù‚Ø¯ÙŠÙ…Ù‹Ø§: 'Ø§Ù„ÙƒÙ†Ø² ØªØ­Øª Ø¬Ø°ÙˆØ± Ø§Ù„Ø´Ø¬Ø±Ø© Ø§Ù„Ø¹Ø¸ÙŠÙ…Ø©...'"
        ],
        monsters: [
          { name: "Ø°Ø¦Ø¨ Ø§Ù„Ø¶Ø¨Ø§Ø¨", hp: 35, atk: 9, type: "common" },
          { name: "Ø´Ø¬Ø±Ø© Ø§Ù„ØºÙˆÙ„", hp: 55, atk: 13, type: "common" },
          { name: "Ø§Ù„Ø¹Ù†ÙƒØ¨ÙˆØª Ø§Ù„Ø³Ø§Ù…", hp: 75, atk: 17, type: "rare" },
          { name: "Ø­Ø§Ø±Ø³ Ø§Ù„ØºØ§Ø¨Ø©", hp: 100, atk: 22, type: "elite" }
        ]
      },
      "Ø§Ù„ÙˆØ§Ø­Ø©": {
        name: "Ø§Ù„ÙˆØ§Ø­Ø© Ø§Ù„Ù…Ø­Ø±Ù‘Ù…Ø©",
        story: [
          "Ù†Ø®ÙŠÙ„ Ø¹ØªÙŠÙ‚ ÙŠØ­ÙŠØ· Ø¨Ù…Ø§Ø¡ Ø£Ø²Ø±Ù‚ Ù„Ø§Ù…Ø¹... Ù„ÙƒÙ† Ø§Ù„Ø­Ø°Ø±ØŒ ÙØ§Ù„ÙˆØ§Ø­Ø© Ù…Ù„Ø¹ÙˆÙ†Ø©!",
          "Ø³Ù…Ø¹Øª ØµÙˆØª Ù†Ø§ÙŠ Ø¨Ø¹ÙŠØ¯... Ù…Ù† ÙŠØ¹Ø²Ù ÙÙŠ Ù‡Ø°Ø§ Ø§Ù„Ù…ÙƒØ§Ù† Ø§Ù„Ù…Ù‚ÙØ±ØŸ",
          "Ø±Ù…Ø§Ù„ Ø°Ù‡Ø¨ÙŠØ© ØªÙ„Ù…Ø¹ ØªØ­Øª Ø§Ù„Ø´Ù…Ø³. Ù‡Ù„ Ù‡ÙŠ ÙƒÙ†Ø² Ø£Ù… ÙØ®ØŸ",
          "Ø¸Ù„ÙŒÙ‘ Ø·ÙˆÙŠÙ„ ÙŠØªØ­Ø±Ùƒ Ø¨ÙŠÙ† Ø§Ù„Ù†Ø®ÙŠÙ„... Ù„Ø§ ÙŠÙ†ØªÙ…ÙŠ Ù„Ø£ÙŠ Ø¥Ù†Ø³Ø§Ù†.",
          "Ù…Ø§Ø¡ Ø§Ù„ÙˆØ§Ø­Ø© ÙŠÙ‡Ù…Ø³ Ø¨Ø£Ø³Ù…Ø§Ø¡ Ø§Ù„Ø¶Ø§Ø¦Ø¹ÙŠÙ†..."
        ],
        monsters: [
          { name: "Ø¹ÙØ±ÙŠØª Ø§Ù„Ø±Ù…Ø§Ù„", hp: 45, atk: 11, type: "common" },
          { name: "Ø§Ù„Ø­ÙŠØ© Ø§Ù„Ø°Ù‡Ø¨ÙŠØ©", hp: 65, atk: 15, type: "rare" },
          { name: "Ø´ÙŠØ·Ø§Ù† Ø§Ù„ÙˆØ§Ø­Ø©", hp: 90, atk: 20, type: "elite" },
          { name: "Ø¬Ù†Ù‘ÙŠ Ø§Ù„Ø±Ù…Ø§Ù„", hp: 120, atk: 25, type: "rare" }
        ]
      },
      "Ø§Ù„Ø¬Ø¨Ø§Ù„": {
        name: "Ø¬Ø¨Ø§Ù„ Ø§Ù„Ø¬Ù†",
        story: [
          "ØµØ®ÙˆØ± Ø´Ø§Ù‡Ù‚Ø© ØªÙ‡Ù…Ø³ Ø¨Ø£Ø³Ø±Ø§Ø± Ù‚Ø¯ÙŠÙ…Ø©. Ù‡Ù„ ØªØ¬Ø±Ø¤ Ø¹Ù„Ù‰ Ø§Ù„ØµØ¹ÙˆØ¯ØŸ",
          "Ø±Ø£ÙŠØª Ù†ÙˆØ±Ù‹Ø§ Ø£Ø²Ø±Ù‚ ÙŠÙ„Ù…Ø¹ ÙÙŠ ÙƒÙ‡Ù Ø¨Ø¹ÙŠØ¯...",
          "Ø§Ù„Ø±ÙŠØ§Ø­ ØªØ­Ù…Ù„ Ù‡Ù…Ø³Ø§Øª Ø¨Ù„ØºØ© Ù„Ù… ØªØ³Ù…Ø¹Ù‡Ø§ Ù…Ù† Ù‚Ø¨Ù„...",
          "Ø£Ø­Ø¬Ø§Ø± Ø§Ù„Ø¬Ø¨Ø§Ù„ ØªØªØ­Ø±Ùƒ Ù„ÙŠÙ„Ø§Ù‹... ØªØ¨Ø­Ø« Ø¹Ù† Ø¶Ø­Ø§ÙŠØ§Ù‡Ø§.",
          "Ø³Ù…Ø¹Øª ØµØ±Ø®Ø© Ù…Ù† Ø£Ø¹Ù…Ø§Ù‚ Ø§Ù„ÙƒÙ‡Ù... Ù‡Ù„ Ù‡ÙŠ Ø§Ø³ØªØºØ§Ø«Ø© Ø£Ù… ÙØ®ØŸ"
        ],
        monsters: [
          { name: "ØºÙˆÙ„ Ø§Ù„Ø¬Ø¨Ø§Ù„", hp: 60, atk: 14, type: "common" },
          { name: "Ø§Ù„Ù†Ø³Ø± Ø§Ù„Ø³Ø§Ø­Ø±", hp: 80, atk: 18, type: "rare" },
          { name: "Ø­Ø§Ø±Ø³ Ø§Ù„ÙƒÙ‡Ù", hp: 110, atk: 24, type: "elite" },
          { name: "Ø§Ù„ØªÙ†ÙŠÙ† Ø§Ù„ØµØºÙŠØ±", hp: 140, atk: 28, type: "rare" }
        ]
      },
      "Ø§Ù„Ù‚Ù„Ø¹Ø©": {
        name: "Ù‚Ù„Ø¹Ø© Ø§Ù„Ø¸Ù„Ø§Ù„",
        story: [
          "Ø£Ø¨ÙˆØ§Ø¨ Ø§Ù„Ù‚Ù„Ø¹Ø© Ù…ÙØªÙˆØ­Ø©... ÙƒØ£Ù†Ù‡Ø§ ØªÙ†ØªØ¸Ø±Ùƒ.",
          "Ø§Ù„Ø¬Ø¯Ø±Ø§Ù† ØªÙ†Ø²Ù Ø¯Ù…Ù‹Ø§ Ù‚Ø¯ÙŠÙ…Ù‹Ø§.",
          "ØµØ±Ø®Ø§Øª Ø§Ù„Ø£Ù…ÙˆØ§Øª ØªÙ…Ù„Ø£ Ø§Ù„Ù…Ù…Ø±Ø§Øª.",
          "Ø§Ù„Ø¹Ø±Ø´ ÙØ§Ø±Øº... Ù„ÙƒÙ† Ø§Ù„Ø¹ÙŠÙˆÙ† ØªØ±Ø§Ù‚Ø¨Ùƒ.",
          "Ø§Ù„Ù‡ÙˆØ§Ø¡ Ø«Ù‚ÙŠÙ„... ÙƒØ£Ù† Ø§Ù„Ø²Ù…Ù† ØªÙˆÙ‚Ù Ù‡Ù†Ø§."
        ],
        monsters: []
      }
    };

    // =============== Ø§Ù„ÙˆØ­Ø´ Ø§Ù„Ø±Ø¦ÙŠØ³ ===============
    const bossMonster = { name: "Ù…Ù„Ùƒ Ø§Ù„Ø¸Ù„Ø§Ù„", hp: 250, atk: 35, type: "boss" };

    // =============== Ø¨Ø¯Ø¡ Ø§Ù„Ù„Ø¹Ø¨Ø© ===============
    function startGame(heroType) {
      let hp = 100, atk = 15;
      if (heroType === 'Ø§Ù„Ø­ÙƒÙŠÙ…') { hp = 140; atk = 12; }
      else if (heroType === 'Ø§Ù„ØµÙŠØ§Ø¯') { hp = 115; atk = 17; }

      game.hero = { name: heroType, maxHp: hp, hp: hp, atk: atk };
      game.gold = 0;
      game.wins = 0;
      game.reputation = 0;
      game.adventureLog = [];
      game.unlockedCastle = false;
      game.currentZone = "Ø§Ù„ØºØ§Ø¨Ø©";
      log(`Ù…Ø±Ø­Ø¨Ù‹Ø§ØŒ Ø£ÙŠÙ‡Ø§ ${heroType}! Ø¨Ø¯Ø£Øª Ø±Ø­Ù„ØªÙƒ ÙÙŠ Ù…Ù…Ø§Ù„Ùƒ Ø§Ù„Ø¸Ù„Ø§Ù„...`);
      updateUI();
      
      document.getElementById('startScreen').style.display = 'none';
      document.getElementById('gameScreen').style.display = 'block';
    }

    function changeZone(zoneName) {
      if (!game.hero || game.hero.hp <= 0) return;
      if (zoneName === "Ø§Ù„Ù‚Ù„Ø¹Ø©" && !game.unlockedCastle) {
        log("Ø§Ù„Ù‚Ù„Ø¹Ø© Ù…ØºÙ„Ù‚Ø©... Ø§Ø¨Ø­Ø« Ø¹Ù† Ù…Ù† ÙŠÙØªØ­Ù‡Ø§ Ù„Ùƒ.");
        return;
      }
      game.currentZone = zoneName;
      log(`Ø§Ù†ØªÙ‚Ù„Øª Ø¥Ù„Ù‰: ${zones[zoneName].name}`);
      
      // ÙØ±ØµØ© Ù„Ù‚Ø§Ø¡ Ø´Ø®ØµÙŠØ© (70%)
      if (npcs[zoneName] && Math.random() > 0.3) {
        const npcList = npcs[zoneName];
        const npc = npcList[Math.floor(Math.random() * npcList.length)];
        showChoices(npc.choices, `${npc.name} ÙŠÙ‚ÙˆÙ„: "${npc.dialogue}"`);
      }
      updateUI();
    }

    function unlockCastle() {
      changeZone("Ø§Ù„Ù‚Ù„Ø¹Ø©");
    }

    // =============== Ù†Ø¸Ø§Ù… Ø§Ù„Ù‡Ø±ÙˆØ¨ ===============
    function tryToFlee(monster) {
      const type = monsterTypes[monster.type];
      // Ø§Ù„Ø³Ø±Ø¹Ø© ØªØ¹ØªÙ…Ø¯ Ø¹Ù„Ù‰ Ù…Ø³ØªÙˆÙ‰ Ø§Ù„Ø¨Ø·Ù„
      const heroSpeed = Math.floor(game.wins / 2) + 1;
      const baseChance = type.fleeChance;
      const finalChance = Math.min(0.8, baseChance + (heroSpeed * 0.05));
      
      if (Math.random() < finalChance) {
        log("Ù‡Ø±Ø¨Øª Ù…Ù† Ø§Ù„Ù…Ø¹Ø±ÙƒØ© Ø¨Ù†Ø¬Ø§Ø­! ğŸƒâ€â™‚ï¸");
        return true;
      } else {
        log("ÙØ´Ù„Øª ÙÙŠ Ø§Ù„Ù‡Ø±ÙˆØ¨! Ø§Ù„ÙˆØ­Ø´ ÙŠÙ‡Ø§Ø¬Ù…Ùƒ Ø¨ØºØ¶Ø¨! ğŸ’¢");
        return false;
      }
    }

    // =============== Ø¨Ø¯Ø¡ Ø§Ù„Ù…Ø¹Ø±ÙƒØ© ===============
    function startBattle(monster) {
      log(`Ø¸Ù‡Ø± ${monster.name}! (${monsterTypes[monster.type].name})`);
      
      const html = `
        <div class="combat-btns">
          <button onclick="fightMonster('${monster.name}', ${monster.hp}, ${monster.atk}, '${monster.type}')">âš”ï¸ ÙˆØ§Ø¬Ù‡Ù‡</button>
          <button onclick="handleFlee('${monster.name}', ${monster.hp}, ${monster.atk}, '${monster.type}')">ğŸƒ Ù‡Ø±Ø¨</button>
        </div>
      `;
      document.getElementById('choicesSection').innerHTML = html;
      document.getElementById('choicesSection').style.display = 'block';
    }

    function handleFlee(name, hp, atk, type) {
      const monster = { name, hp, atk, type };
      if (tryToFlee(monster)) {
        // Ù†Ø¬Ø§Ø­ Ø§Ù„Ù‡Ø±ÙˆØ¨
      } else {
        // ÙØ´Ù„ Ø§Ù„Ù‡Ø±ÙˆØ¨ â†’ Ù‡Ø¬ÙˆÙ… ÙÙˆØ±ÙŠ
        let damage = atk;
        if (game.hero.atk > atk * 1.8) {
          damage = Math.max(1, Math.floor(damage * 0.6));
          log(`${name} ÙŠØ±ØªØ¬Ù Ù…Ù† Ø§Ù„Ø®ÙˆÙ!`);
        }
        game.hero.hp -= damage;
        if (game.hero.hp < 0) game.hero.hp = 0;
        log(`${name} Ù‡Ø§Ø¬Ù…Ùƒ Ø¨Ù€ ${damage} Ø¶Ø±Ø±!`);
        if (game.hero.hp <= 0) {
          log("Ù„Ù‚Ø¯ Ø³Ù‚Ø·Øª ÙÙŠ Ù…Ù…Ø§Ù„Ùƒ Ø§Ù„Ø¸Ù„Ø§Ù„... Ø§Ù„Ø¸Ù„Ø§Ù… ÙŠÙ„ÙÙƒ. ğŸ’€");
        }
        updateUI();
      }
      document.getElementById('choicesSection').style.display = 'none';
    }

    // =============== Ù‚ØªØ§Ù„ ÙƒØ§Ù…Ù„ ===============
    function fightMonster(name, hp, atk, type) {
      document.getElementById('choicesSection').style.display = 'none';
      
      let monsterHP = hp;
      let turn = 0;
      const interval = setInterval(() => {
        // Ø°ÙƒØ§Ø¡ Ø§Ù„ÙˆØ­Ø´: Ù‡Ù„ ÙŠÙ‡Ø±Ø¨ØŸ
        if (turn > 0 && turn % 2 === 1) {
          const typeData = monsterTypes[type];
          const healthRatio = monsterHP / hp;
          if (healthRatio < typeData.fearThreshold && Math.random() < 0.6) {
            log(`${name} ÙŠÙ‡Ø±Ø¨ Ù…Ù† Ø§Ù„Ù…Ø¹Ø±ÙƒØ©!`);
            game.gold += Math.floor(Math.random() * 15) + 10;
            log("Ø­ØµÙ„Øª Ø¹Ù„Ù‰ Ø°Ù‡Ø¨ Ù…Ù† Ù…Ù…ØªÙ„ÙƒØ§ØªÙ‡!");
            game.wins++;
            updateUI();
            clearInterval(interval);
            return;
          }
        }

        if (turn % 2 === 0) {
          // Ø§Ù„Ø¨Ø·Ù„ ÙŠÙ‡Ø§Ø¬Ù…
          let damage = game.hero.atk;
          if (game.tempAtkBoost) {
            damage += game.tempAtkBoost;
            delete game.tempAtkBoost;
          }
          monsterHP -= damage;
          log(`Ù‡Ø§Ø¬Ù…Øª ${name} Ø¨Ù€ ${damage} Ø¶Ø±Ø±! ğŸ’¥`);
          if (monsterHP <= 0) {
            // Ø´ÙØ§Ø¡ Ø¨Ø¹Ø¯ Ø§Ù„Ù‚ØªØ§Ù„ (Ø¨Ø¯ÙˆÙ† ØªØ¬Ø§ÙˆØ² Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ù‚ØµÙ‰)
            game.hero.hp = Math.min(game.hero.maxHp, game.hero.hp + 30);
            // Ù…ÙƒØ§ÙØ£Ø© Ø°ÙƒÙŠØ©
            let reward = 20;
            if (type === "rare") reward = 40;
            else if (type === "elite") reward = 60;
            else if (type === "boss") reward = 120;
            
            game.gold += reward;
            game.wins++;
            log(`Ù‡Ø²ÙÙ…Øª ${name}! (+30 ØµØ­Ø©ØŒ +${reward} Ø°Ù‡Ø¨) ğŸ‰`);
            updateUI();
            clearInterval(interval);
            return;
          }
        } else {
          // Ø§Ù„ÙˆØ­Ø´ ÙŠÙ‡Ø§Ø¬Ù…
          let damage = atk;
          // ØªØ£Ø«ÙŠØ± Ø§Ù„Ø®ÙˆÙ
          if (game.hero.atk > atk * 1.7) {
            damage = Math.max(1, Math.floor(damage * 0.65));
            log(`${name} ÙŠØ±ØªØ¬Ù Ù…Ù† Ù‚ÙˆØªÙƒ!`);
          }
          game.hero.hp -= damage;
          if (game.hero.hp < 0) game.hero.hp = 0;
          log(`${name} Ù‡Ø§Ø¬Ù…Ùƒ Ø¨Ù€ ${damage} Ø¶Ø±Ø±! ğŸ©¸`);
          if (game.hero.hp <= 0) {
            log("Ù„Ù‚Ø¯ Ø³Ù‚Ø·Øª ÙÙŠ Ù…Ù…Ø§Ù„Ùƒ Ø§Ù„Ø¸Ù„Ø§Ù„... Ø§Ù„Ø¸Ù„Ø§Ù… ÙŠÙ„ÙÙƒ. ğŸ’€");
            updateUI();
            clearInterval(interval);
            return;
          }
          updateUI();
        }
        turn++;
      }, 1100);
    }

    // =============== Ø§Ø³ØªÙƒØ´Ø§Ù ===============
    function explore() {
      if (!game.hero || game.hero.hp <= 0) {
        log("Ù„Ù‚Ø¯ Ø³Ù‚Ø·Øª... Ø§Ø¨Ø¯Ø£ Ù…Ù† Ø¬Ø¯ÙŠØ¯.");
        return;
      }

      if (game.currentZone === "Ø§Ù„Ù‚Ù„Ø¹Ø©") {
        log("Ø§Ù„Ù…Ù„Ùƒ ÙŠÙ†ØªØ¸Ø±Ùƒ ÙÙŠ Ø§Ù„Ø¹Ø±Ø´... Ø§Ø°Ù‡Ø¨ Ù„Ù„Ø­Ø¯ÙŠØ« Ù…Ø¹Ù‡.");
        return;
     
